# cargo-release configuration for gtrom
# The pre-release-hook rebuilds the SDK tarball before publishing

pre-release-hook = ["tar", "-czf", "src/bin/sdk-template.tar.gz", "-C", "..", "--exclude=*/target", "--exclude=*.gtr", "sdk"]

# Tag format for workspace member
tag-prefix = "gametank-sdk-"
tag-name = "{{prefix}}v{{version}}"

# Let cargo-dist handle GitHub releases
tag = true
publish = false

# Push commit, wait for GitHub to process, then push tag
push = true
push-remote = "origin"
tag-push = false
post-release-hook = ["bash", "-c", "sleep 3 && git push origin --tags"]
